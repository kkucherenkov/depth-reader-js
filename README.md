XDM Depth Reader
================

This library parses JPEG images in the XDM (eXtensible Device Metadata) format,
which succeeds the Google Lens Blur format generated by the Android Camera app
(it can also read the Lens Blur format as it maintains backward compatibility).

The XDM spec is jointly developed by Intel and Google, and is currently in beta.
This document will be updated to link to the published spec when it is complete.

This library may be used in both browser and Node.js, but some tests fail when
run inside PhantomJS.

## Dependencies

 - [RSVP.js](https://github.com/tildeio/rsvp.js) *(polyfill for Promise)*
 - [node-xhr2](https://github.com/pwnall/node-xhr2) *(polyfill for XMLHttpRequest in Node.js)*
 - [XMLDOM](https://github.com/jindw/xmldom) *(polyfill for DOMParser in Node.js)*

## Usage

First install the necessary dependencies:

Browser:

    <script src="rsvp.js"></script>
    <script src="depth-reader.js"></script>

Node.js:

    var DepthReader = require('./depth-reader'),
        Image       = require('canvas').Image;

Example:

    var fileUrl = 'http://localhost/images/depth.jpg';
    new DepthReader().loadFile(fileUrl)
        .then(function(reader) {
            var rgbImage   = new Image(),
                depthImage = new Image();

            rgbImage.src = reader.image.data;
            console.log('RGB image dimensions:',
                rgbImage.width + 'x' + rgbImage.height);

            depthImage.src = reader.depth.data;
            console.log('Depthmap image dimensions:',
                depthImage.width + 'x' + depthImage.height);
        })
        .catch(function(error) {
            console.error('loading failed:', error);
        });

## Tests

Install global dependencies:

    npm install -g grunt mocha

Install project dependencies:

    npm install
    bower install

Run Node.js tests in console and browser tests in web page:

    npm start

## Authors

  - Erhhung Yuan <erhhung.yuan@intel.com>
  - Yu Bai <yu.bai@intel.com>

## License

The MIT License

Copyright (c)2015 Intel Corporation
